package persistidor.comandos;

import java.util.ArrayList;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;
import persistidor.entidades.Atributo;
import persistidor.entidades.Clase;
import persistidor.entidades.Objeto;
import persistidor.entidades.Primitivo;
import persistidor.entidades.Sesion;
import persistidor.servicios.ServicioDePrimitivos;

// La hacen mis compa√±eros
@Component
public class CrearEntidadObjetoDesdeUnObjectComando
{
	@Autowired
	private ServicioDePrimitivos servicioDePrimitivos;
	
	// Crea una entidad objeto a partir de un object.
	// Si la clase del objeto o (o la propiedad) tiene la anottation Persistable,
	// asegurarse de cargarla en el "Objeto".
	// Si la clase del objeto o (o la propiedad) tiene la anottation NotPersistable,
	// asegurarse de NO cargarla en el "Objeto".
	// No setear IDs nunca (de ninguna entidad, eso se maneja solo en los repos).
	public Objeto Ejecutar(Object o, Sesion sesion)
	{
		Primitivo primitivoString = servicioDePrimitivos.ObtenerPrimitivoPorNombre("string");
		Primitivo primitivoInt = servicioDePrimitivos.ObtenerPrimitivoPorNombre("int");
				
		Atributo atributoCalleDeDireccion = new Atributo("calle", primitivoString, false);
		Atributo atributoNumeroDeDireccion = new Atributo("numero", primitivoInt, false);
		Atributo atributoCodigoPostalDeDireccion = new Atributo("codigoPostal", primitivoString, false);
		Atributo atributoLocalidadDeDireccion = new Atributo("localidad", primitivoString, false);
		Atributo atributoProvinciaDeDireccion = new Atributo("provincia", primitivoString, false);
		Atributo atributoPaisDeDireccion = new Atributo("pais", primitivoString, false);
		
		List<Atributo> atributosDeDireccion = new ArrayList<Atributo>();
		atributosDeDireccion.add(atributoCalleDeDireccion);
		atributosDeDireccion.add(atributoNumeroDeDireccion);
		atributosDeDireccion.add(atributoCodigoPostalDeDireccion);
		atributosDeDireccion.add(atributoLocalidadDeDireccion);
		atributosDeDireccion.add(atributoProvinciaDeDireccion);
		atributosDeDireccion.add(atributoPaisDeDireccion);
		
		Clase claseDireccion = new Clase("persistidor.controladores.Direccion", atributosDeDireccion);
		
		return new Objeto();
	}
}
